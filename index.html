<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.3.2/aframe/build/aframe-ar.js"></script>
    <!-- Add any additional libraries or stylesheets here -->
    <title>Dynamic Location-based AR</title>
</head>
<body>
    <a-scene
        vr-mode-ui="enabled: false"
        embedded
        arjs="sourceType: webcam; debugUIEnabled: false;"
    >
        <!-- Add any additional assets (textures, etc.) here -->
        <a-assets>
            <a-asset-item id="model" src="scene.gltf"></a-asset-item>
        </a-assets>

        <!-- Create AR entity and load the 3D model -->
        <a-entity id="ar-marker"></a-entity>

        <!-- Open the camera -->
        <a-entity camera></a-entity>

        <script>
            // Get user's current location using Geolocation API
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    const altitude = position.coords.altitude || 0;

                    // Create AR entity and load the 3D model
                    const arEntity = document.getElementById('ar-marker');
                    arEntity.setAttribute('gps-entity-place', {
                        latitude: latitude,
                        longitude: longitude,
                        elevation: altitude
                    });

                    const modelEntity = document.createElement('a-entity');
                    modelEntity.setAttribute('gltf-model', '#model');
                    modelEntity.setAttribute('scale', '1 1 1');

                    arEntity.appendChild(modelEntity);
                },
                (error) => {
                    console.error('Error getting user location:', error);
                }
            );
        </script>
    </a-scene>
</body>
</html>
